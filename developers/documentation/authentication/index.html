<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>	<title>MEdTech Central Authentication Documentation</title>	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">	<link href="css/display.css" rel="stylesheet" type="text/css" /></head><body><table width="100%" cellspacing="5" cellpadding="5" border="0" align="center"><tr>	<td>	<span class="content-heading">MEdTech Central Authentication Documentation</span><br />	<span class="content-date">Version 1.1.0 - Matt Simpson (<a href="mailto:simpson@post.queensu.ca">simpson@post.queensu.ca</a>) - September 16th, 2004.</span>	<br /><br />	<span class="content-subheading">Documentation Index</span>	<ol>	<li><a href="#into">Introduction</a></li>	<li><a href="#req">Requirements</a></li>	<li><a href="#install">Installation</a></li>	<li><a href="#definfo">Default Returnable Information</a></li>	<li><a href="#usage">Usage</a></li>	<li><a href="#examples">Examples</a></li>	</ol>	<br /><hr /><br />		<a name="intro"></a><span class="content-subheading">Introduction</span><br />	This system was developed to provide a secure and flexible authentication solution for a multi-application environment. Currently interaction class support is limited to PHP 4.1.2+; however interaction classes for Perl 5.6+, Python 2.3+, ASP, ASP.NET and Java are planned for the future to provide a complete solution whatever your language of choice may be.	<br /><br />	<a name="req"></a><span class="content-subheading">Requirements</span><br />	<ul>	<li>Web-Server such as Apache 1.3+ / IIS 5+</li>	<li>PHP Class Requirements</li>		<ul>		<li>PHP 4.1.2+</li>		</ul>	</ul>	<a name="install"></a><span class="content-subheading">Installation</span><br />	<ul>	<li>PHP Class Installation</li>		<ul>		<li>Obtain your application id, authentication user id and authentication password from MEdTech unit.</li>		<li>Copy the authentication.class.php file to a web-accessible directory on your website.</li>		<li>That's it. It's ready to use without any modifications.</li>		</ul>	</ul>	<a name="usage"></a><span class="content-subheading">Usage</span><br />	<ul>	<li><span class="content-subheading">PHP Class Usage</span></li>		<ol>		<li>			<b>REQUIRED:</b> - First you need to include the authentication class PHP file:			<div class="code">require_once(dirname(__FILE__).&quot;/authentication.class.php&quot;);</div>		</li>		<li>			<b>REQUIRED:</b> - Next declare the new class:			<div class="code">$auth = new AuthSystem();</div>			<b>- OR - </b> you can specify a custom URL to the MEdTech Authentication program:			<div class="code">$auth = new AuthSystem(&quot;http://meds.queensu.ca/medtech/authentication/authenticate.php&quot;);</div>		</li>		<li>			<b>REQUIRED:</b> - Next set your provided application ID, script ID and script Password.			<div class="code">$auth->setAppAuthentication(&quot;1&quot;, &quot;000072638085&quot;, &quot;PasswrD91&quot;);</div>		</li>		<li>			<b>REQUIRED:</b> - Next provide the class with the end-user's username and password you wish to authenticate:			<div class="code">$auth->setUserAuthentication($_POST[&quot;username&quot;], $_POST[&quot;password&quot;]);</div>		</li>		<li>			<b>REQUIRED:</b> - Lastly, execute the class using Authenticate. Optionally you can ask the program to return information from the database about the user if their authentication is successful. A full list of options is available below. The $result variable will return all data in an array.			<div class="code">$result = $auth->Authenticate();</div>			<b>- OR -</b> you can specify the data you would like returned to you.			<div class="code">$result = $auth->Authenticate(array(&quot;firstname&quot;,&quot;lastname&quot;,&quot;city&quot;,&quot;province&quot;,&quot;postcode&quot;));</div>		</li>		<li>			<b>OPTIONAL:</b> - After the program has returned the information to you, you can verify that the user is allowed to log into the system. Once you're certain this user is a good user you can tell the system to update the last time they logged in, by using the following:			<div class="code">$auth->updateLastLogin();</div>		</li>		</ol>	</ul>	<a name="definfo"></a><span class="content-subheading">Default Returnable Information</span><br />	This is the list of default returnable data from this class for use in the setReqInformation() function. Please keep in mind that it is possible to obtain more information through use of our "private" or "site specific" data. 	<blockquote>	<table width="100%" cellspacing="1" cellpadding="1" border="0">	<tr>		<td><b>Key</b></td>		<td><b>Explanation</b></td>	</tr>	<tr>		<td>id</td>		<td>- Returns the database ID of the authenticated user.</td>	</tr>	<tr>		<td>number</td>		<td>- Returns the Queen's ID or Employee ID.</td>	</tr>	<tr>		<td>prefix</td>		<td>- Returns the name prefix (eg, Dr., Mrs., etc.)</td>	</tr>	<tr>		<td>firstname</td>		<td>- Returns the user's first name.</td>	</tr>	<tr>		<td>lastname</td>		<td>- Returns the user's last name.</td>	</tr>	<tr>		<td>organisation</td>		<td>- Returns the user's organisation.</td>	</tr>	<tr>		<td>department</td>		<td>- Returns the user's department.</td>	</tr>	<tr>		<td>email</td>		<td>- Returns the primary e-mail address (post, qlink, etc.)</td>	</tr>	<tr>		<td>email_alt</td>		<td>- Returns any alternative e-mail address.</td>	</tr>	<tr>		<td>telephone</td>		<td>- Returns the user's telephone number.</td>	</tr>	<tr>		<td>fax</td>		<td>- Returns the user's fax number.</td>	</tr>	<tr>		<td>address</td>		<td>- Returns the user's address.</td>	</tr>	<tr>		<td>city</td>		<td>- Returns the user's city.</td>	</tr>	<tr>		<td>province</td>		<td>- Returns the user's province.</td>	</tr>	<tr>		<td>postcode</td>		<td>- Returns the user's postal code.</td>	</tr>	<tr>		<td>country</td>		<td>- Returns the user's country.</td>	</tr>	<tr>		<td>access_starts</td>		<td>- Returns when user's access to your application starts (unix timestamp).</td>	</tr>	<tr>		<td>access_expires</td>		<td>- Returns when user's access to your application expires (unix timestamp).</td>	</tr>	<tr>		<td>last_login</td>		<td>- Returns the date the user last logged in (unix timestamp).</td>	</tr>	<tr>		<td>last_ip</td>		<td>- Returns the IP of their last login.</td>	</tr>	<tr>		<td>role</td>		<td>- Returns the user's &quot;role&quot; within your application.</td>	</tr>	<tr>		<td>group</td>		<td>- Returns the user's &quot;group&quot; within your application.</td>	</tr>	<tr>		<td>private-*</td>		<td>- Returns any site specifc fields registered for your application, eg. private-grad_year.</td>	</tr>	</table>	</blockquote>	<br /><br />	<a name="examples"></a><span class="content-subheading">Examples</span><br />	<ul>		<li>			<span class="content-subheading">PHP Class Example</span><br />			<div class="code">			&lt;?php<br />			// Check if there is an HTTP posted login action.<br />			if($_POST[&quot;action&quot;] == &quot;login&quot;) {<br />			&nbsp;$error&nbsp;= 0;<br />			&nbsp;$errorstr&nbsp;= &quot;&quot;;<br />			&nbsp;<br />			&nbsp;require_once(&quot;./classes/authentication.class.php&quot;);<br />			&nbsp;$auth = new AuthSystem();<br />			&nbsp;$auth-&gt;setAppAuthentication(&quot;1&quot;, &quot;000072638085&quot;, &quot;PasswrD91&quot;);<br />			&nbsp;$auth-&gt;setUserAuthentication($_POST[&quot;username&quot;], $_POST[&quot;password&quot;]);<br />			&nbsp;$result = $auth-&gt;Authenticate(array(&quot;firstname&quot;,&quot;lastname&quot;,&quot;city&quot;,&quot;province&quot;,&quot;postcode&quot;));<br />			&nbsp;<br />			&nbsp;if($result[&quot;STATUS&quot;] == &quot;success&quot;) {<br />			&nbsp;&nbsp;$_SESSION[&quot;isAuth&quot;] = true;<br />			&nbsp;&nbsp;$_SESSION[&quot;info&quot;][&quot;firstname&quot;]&nbsp;= $result[&quot;FIRSTNAME&quot;];<br />			&nbsp;&nbsp;$_SESSION[&quot;info&quot;][&quot;lastname&quot;]&nbsp;&nbsp;= $result[&quot;LASTNAME&quot;];<br />			&nbsp;&nbsp;$_SESSION[&quot;info&quot;][&quot;city&quot;]&nbsp;&nbsp;= $result[&quot;CITY&quot;];<br />			&nbsp;&nbsp;$_SESSION[&quot;info&quot;][&quot;province&quot;]&nbsp;&nbsp;= $result[&quot;PROVINCE&quot;];<br />			&nbsp;&nbsp;$_SESSION[&quot;info&quot;][&quot;postcode&quot;]&nbsp;&nbsp;= $result[&quot;POSTCODE&quot;];<br />			&nbsp;&nbsp;$auth->updateLastLogin();<br />			&nbsp;} else {<br />			&nbsp;&nbsp;$error++;<br />			&nbsp;&nbsp;$errorstr = $result[&quot;MESSAGE&quot;];<br />			&nbsp;}<br />			} elseif($_GET[&quot;action&quot;] == &quot;logout&quot;) {<br />			&nbsp;$_SESSION = array();<br />			}<br />			?&gt;<br />			&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;<br />			&lt;html&gt;<br />			&lt;head&gt;<br />			&nbsp;&lt;title&gt;&lt;?= (($_SESSION[&quot;isAuth&quot;]) ? &quot;Welcome &quot;.$_SESSION[&quot;info&quot;][&quot;firstname&quot;].&quot;!&quot; : &quot;Example Authentication Usage&quot;) ?&gt;&lt;/title&gt;<br />			&nbsp;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<br />			&lt;/head&gt;<br />			<br />			&lt;body&gt;<br />			&lt;? if(!$_SESSION[&quot;isAuth&quot;]) : ?&gt;<br />			&nbsp;&lt;fieldset style=&quot;width: 315px&quot;&gt;<br />			&nbsp;&lt;legend&gt;Example Login Box&lt;/legend&gt;<br />			&nbsp;&lt;form action=&quot;index.php&quot; method=&quot;post&quot;&gt;<br />			&nbsp;&lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;login&quot; /&gt;<br />			&nbsp;&lt;table width=&quot;100%&quot;&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td colspan=&quot;2&quot;&gt;<br />			&nbsp;&nbsp;&nbsp;&lt;?<br />			&nbsp;&nbsp;&nbsp;if($error) {<br />			&nbsp;&nbsp;&nbsp;&nbsp;echo $errorstr;<br />			&nbsp;&nbsp;&nbsp;} else {<br />			&nbsp;&nbsp;&nbsp;&nbsp;echo &quot;Please enter your username and password to login.&quot;;<br />			&nbsp;&nbsp;&nbsp;}<br />			&nbsp;&nbsp;&nbsp;?&gt;<br />			&nbsp;&nbsp;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Username:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&quot; style=&quot;width: 100%&quot; /&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Password:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; value=&quot;&quot; style=&quot;width: 100%&quot; /&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td colspan=&quot;2&quot; align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Login&quot; /&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;/table&gt;<br />			&nbsp;&lt;/form&gt;<br />			&nbsp;&lt;/fieldset&gt;<br />			&lt;? else : ?&gt;<br />			&nbsp;&lt;fieldset style=&quot;width: 315px; padding-top: 0px&quot;&gt;<br />			&nbsp;&lt;legend&gt;Welcome &lt;?= $_SESSION[&quot;info&quot;][&quot;firstname&quot;] ?&gt;!&lt;/legend&gt;<br />			&nbsp;&lt;table width=&quot;100%&quot;&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td colspan=&quot;2&quot; align=&quot;right&quot;&gt;&lt;a href=&quot;index.php?action=logout&quot;&gt;Logout&lt;/a&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td colspan=&quot;2&quot;&gt;<br />			&nbsp;&nbsp;&nbsp;You're now logged into our application.&lt;br /&gt;<br />			&nbsp;&nbsp;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Firstname:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;?= $_SESSION[&quot;info&quot;][&quot;firstname&quot;] ?&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Lastname:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;?= $_SESSION[&quot;info&quot;][&quot;lastname&quot;] ?&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;City:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;?= $_SESSION[&quot;info&quot;][&quot;city&quot;] ?&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Province:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;?= $_SESSION[&quot;info&quot;][&quot;province&quot;] ?&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;tr&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;b&gt;Postal Code:&lt;/b&gt;&lt;/td&gt;<br />			&nbsp;&nbsp;&lt;td&gt;&lt;?= $_SESSION[&quot;info&quot;][&quot;postcode&quot;] ?&gt;&lt;/td&gt;<br />			&nbsp;&lt;/tr&gt;<br />			&nbsp;&lt;/table&gt;<br />			&nbsp;&lt;/fieldset&gt;<br />			&lt;? endif; ?&gt;&nbsp;<br />			&lt;/body&gt;<br />			&lt;/html&gt;<br />			</div>		</li>	</ul>			</td></tr></table></body></html>